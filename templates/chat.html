{#<!DOCTYPE html>#}
{#<html lang="ko">#}
{#<head>#}
{#  <meta charset="UTF-8" />#}
{#  <meta name="viewport" content="width=device-width, initial-scale=1.0" />#}
{#  <title>채팅</title>#}
{#  <link rel="stylesheet" href="{{url_for('static',filename='bootstrap-5.3.5-dist/css/bootstrap.min.css')}}">#}
{#    <script src="{{url_for('static',filename='bootstrap-5.3.5-dist/js/bootstrap.bundle.js')}}"></script>#}
{#  <style>#}
{#    body {#}
{#      background-color: #fff;#}
{#      font-family: 'Helvetica', sans-serif;#}
{#    }#}
{##}
{#    .top-bar {#}
{#      position: fixed;#}
{#      top: 0;#}
{#      left: 0;#}
{#      width: 100%;#}
{#      background-color: white;#}
{#      padding: 10px 16px;#}
{#      display: flex;#}
{#      align-items: center;#}
{#      justify-content: space-between;#}
{#      border-bottom: 2px solid pink;#}
{#      z-index: 1000;#}
{#    }#}
{##}
{#    .top-title {#}
{#      text-align: center;#}
{#      flex: 1;#}
{#      font-size: 1.5rem;#}
{#      font-weight: bold;#}
{#      color: #555;#}
{#    }#}
{##}
{#    .status {#}
{#      color: #c57384;#}
{#      text-align: center;#}
{#      font-weight: bold;#}
{#      font-size: 0.9rem;#}
{#      margin-top: 0.2rem;#}
{#    }#}
{##}
{#    .status .dot {#}
{#      color: #16c172;#}
{#      font-size: 1rem;#}
{#      vertical-align: middle;#}
{#    }#}
{##}
{#    .position-card {#}
{#      background-color: #fff;#}
{#      border: 1px solid #ffe5ee;#}
{#      border-left: 5px solid #c57384;#}
{#      border-radius: 10px;#}
{#      margin: 80px 16px 16px;#}
{#      padding: 16px;#}
{#      box-shadow: 0 2px 6px rgba(0,0,0,0.05);#}
{#    }#}
{##}
{#    .position-card h5 {#}
{#      font-weight: bold;#}
{#      color: #6e3b4c;#}
{#    }#}
{##}
{#    .chat-box {#}
{#      display: flex;#}
{#      align-items: flex-start;#}
{#      margin: 1rem;#}
{#    }#}
{##}
{#    .chat-box img {#}
{#      width: 30px;#}
{#      height: 30px;#}
{#      margin-right: 10px;#}
{#    }#}
{##}
{#    .chat-bubble {#}
{#      background-color: #fff;#}
{#      border: 1px solid #ffd9e2;#}
{#      border-radius: 16px;#}
{#      padding: 12px 16px;#}
{#      max-width: 75%;#}
{#      box-shadow: 0 1px 2px rgba(0,0,0,0.05);#}
{#      font-size: 0.95rem;#}
{#    }#}
{##}
{#    .chat-input {#}
{#      position: fixed;#}
{#      bottom: 0;#}
{#      left: 0;#}
{#      right: 0;#}
{#      background-color: #fff;#}
{#      border-top: 1px solid #ffd9e2;#}
{#      padding: 10px;#}
{#      display: flex;#}
{#      align-items: center;#}
{#      gap: 10px;#}
{#    }#}
{##}
{#    .chat-input input {#}
{#      flex: 1;#}
{#      border-radius: 30px;#}
{#      border: none;#}
{#      background-color: #f1f1f1;#}
{#      padding: 10px 16px;#}
{#      font-size: 0.95rem;#}
{#    }#}
{##}
{#    .chat-input button {#}
{#      background: none;#}
{#      border: none;#}
{#      font-size: 1.4rem;#}
{#      color: #666;#}
{#    }#}
{#  </style>#}
{#</head>#}
{#<body>#}
{#  <div class="top-bar">#}
{#    <a href="{{ url_for('chat.chat_list')}}" style="text-decoration: none; color: black; font-size: 1.5rem;">&lt;</a>#}
{#    <div class="top-title">{{job.buser.real_name}}</div>#}
{#    <div style="width: 24px;"></div>#}
{#  </div>#}
{##}
{#  <div class="position-card">#}
{#    <h5>{{job.title}}</h5>#}
{#    <p style="margin: 0; color: #555; font-size: 0.95rem;">{{job.content}}<br><span style="font-size: 0.85rem; color: #888;">{{ job.location }}</span><br><span style="color: #9c3c3c;">💰 {{job.salary}}</span></p>#}
{#  </div>#}
{##}
{#  <div class="chat-box">#}
{#    <img src="{{url_for('static',filename='img/icon.png')}}" alt="프로필">#}
{#    <div class="chat-bubble">#}
{#      안녕하세요. 현재 적합한 인재를 찾고 있습니다.<br>#}
{#      포지션에 관심이 있으시다면 언제든지 지원해 주세요.#}
{#    </div>#}
{#  </div>#}
{##}
{#  <div class="chat-input">#}
{#    <button>＋</button>#}
{#    <input type="text" placeholder="메시지 보내기" />#}
{#    <button>&#10148;</button>#}
{#  </div>#}
{#</body>#}
{#</html>#}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>채팅방</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap-5.3.5-dist/css/bootstrap.min.css') }}">
  <script src="{{ url_for('static', filename='bootstrap-5.3.5-dist/js/bootstrap.bundle.js') }}"></script>
  <style>
    body {
      background-color: #f8f4f6;
      padding-bottom: 100px;
    }
        .top-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background-color: white;
      padding: 10px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 2px solid pink;
      z-index: 1000;
    }

    .job-card {
      background-color: #fff0f5;
      border: 1px solid pink;
      border-radius: 12px;
      padding: 16px;
      margin: 20px 20px 10px;
    }

    .chat-box {
      max-height: 400px;
      overflow-y: auto;
      padding: 0 20px;
    }

    .chat-message {
      margin: 10px 0;
      display: flex;
      align-items: center;
    }

    .chat-message.sent {
      justify-content: flex-end;
    }

    .chat-message .bubble {
      display: inline-block;
      padding: 10px 14px;
      border-radius: 20px;
      background-color: #fff;
      max-width: 70%;
      word-wrap: break-word;
    }

    .chat-message.sent .bubble {
      background-color: #dcf8c6;
    }

    .avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      margin-right: 8px;
      object-fit: cover;
    }

    .chat-input {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: white;
      border-top: 1px solid #ccc;
      padding: 10px 20px;
      display: flex;
      gap: 10px;
    }

    .chat-input input {
      flex: 1;
      border-radius: 20px;
      border: 1px solid #ccc;
      padding: 8px 12px;
    }

    .chat-input button {
      border: none;
      background-color: pink;
      padding: 8px 16px;
      border-radius: 20px;
      color: white;
    }
  </style>
</head>
<body>
<div class="top-bar">
    <a href="{{ url_for('chat.chat_list')}}" style="text-decoration: none; color: black; font-size: 1.5rem;">&lt;</a>
    <div class="top-title">{{chat.job.buser.real_name}}</div>
    <div style="width: 24px;"></div>
  </div>

  <!-- Job Info -->
  <div class="job-card">
    <h5>{{ chat.job.title }}</h5>
    <p>{{ chat.job.location }} | {{ chat.job.salary }}</p>
    <p class="text-muted mb-0">{{ chat.job.content }}</p>
  </div>

  <!-- Chat Messages -->
  <div class="chat-box">
    {% for msg in messages %}
    <div class="chat-message {% if msg.sender_id == current_user.id %}sent{% endif %}">
      {% if msg.sender_id != current_user.id %}
        <img src="{{ url_for('static', filename=msg.sender.avatar or 'img/icon.png') }}" class="avatar" alt="avatar">
      {% endif %}
      <div class="bubble">{{ msg.content }}</div>
    </div>
    {% endfor %}
  </div>

  <!-- Message Form -->
  <form method="POST" action="{{ url_for('chat.chat_room', chat_id=chat.id) }}" class="chat-input">
    <input type="text" name="content" placeholder="메시지를 입력하세요..." required>
    <button type="submit">전송</button>
  </form>

</body>
</html>

